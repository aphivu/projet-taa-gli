{"ast":null,"code":"//import fetch from 'cross-fetch'\nimport { apiUrl } from '../../requests/utils';\nvar LOGIN_REQUEST = 'LOGIN_REQUEST';\nvar LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nvar LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport function loginRequest(username, password) {\n  return {\n    type: LOGIN_REQUEST,\n    username: username,\n    password: password\n  };\n}\nexport function loginSucess(username, password) {\n  return {\n    type: LOGIN_SUCCESS,\n    username: username,\n    password: password\n  };\n}\nexport function loginFailure() {\n  return {\n    type: LOGIN_FAILURE\n  };\n}\nexport function login(username, password) {\n  console.log(\"Login\");\n  return function (dispatch) {\n    dispatch(loginRequest(username, password));\n    var loginHeader = {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Basic ' + btoa(username + ':' + password)\n      }\n    };\n    return fetch(apiUrl + '/loginApp', loginHeader).then(function (response) {\n      if (response.ok) {\n        response.json().then(function (responseJson) {\n          if (responseJson) {\n            dispatch(loginSucess(username, password));\n          } else {\n            dispatch(loginFailure());\n          }\n        });\n      } else {\n        dispatch(loginFailure());\n      }\n    }, function (error) {\n      console.log('An error occurred.', error);\n      dispatch(loginFailure());\n    });\n  };\n}","map":{"version":3,"sources":["/home/phi/Documents/M2 CCN/Cours/TAA/Projet/UI/frontend_react/src/redux/actions/userAction.js"],"names":["apiUrl","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","loginRequest","username","password","type","loginSucess","loginFailure","login","console","log","dispatch","loginHeader","method","headers","btoa","fetch","then","response","ok","json","responseJson","error"],"mappings":"AAAA;AACA,SAAQA,MAAR,QAAqB,sBAArB;AAEA,IAAMC,aAAa,GAAG,eAAtB;AACA,IAAMC,aAAa,GAAG,eAAtB;AACA,IAAMC,aAAa,GAAG,eAAtB;AAGA,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAA+BC,QAA/B,EAAwC;AAC3C,SAAO;AACHC,IAAAA,IAAI,EAAEN,aADH;AAEHI,IAAAA,QAAQ,EAAEA,QAFP;AAGHC,IAAAA,QAAQ,EAAEA;AAHP,GAAP;AAKH;AAED,OAAO,SAASE,WAAT,CAAqBH,QAArB,EAA+BC,QAA/B,EAAwC;AAC3C,SAAO;AACHC,IAAAA,IAAI,EAAEL,aADH;AAEHG,IAAAA,QAAQ,EAACA,QAFN;AAGHC,IAAAA,QAAQ,EAACA;AAHN,GAAP;AAKH;AAED,OAAO,SAASG,YAAT,GAAuB;AAC1B,SAAO;AACHF,IAAAA,IAAI,EAAEJ;AADH,GAAP;AAGH;AAED,OAAO,SAASO,KAAT,CAAeL,QAAf,EAAwBC,QAAxB,EAAiC;AACpCK,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AAEA,SAAO,UAAUC,QAAV,EAAmB;AAEtBA,IAAAA,QAAQ,CAACT,YAAY,CAACC,QAAD,EAAUC,QAAV,CAAb,CAAR;AAEA,QAAMQ,WAAW,GAAG;AAChBC,MAAAA,MAAM,EAAE,MADQ;AAEhBC,MAAAA,OAAO,EAAE;AACP,yBAAiB,WAAUC,IAAI,CAACZ,QAAQ,GAAC,GAAT,GAAaC,QAAd;AADxB;AAFO,KAApB;AAOA,WAAOY,KAAK,CAAClB,MAAM,GAAG,WAAV,EAAsBc,WAAtB,CAAL,CACEK,IADF,CACO,UAACC,QAAD,EAAc;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAgB;AACZD,QAAAA,QAAQ,CAACE,IAAT,GACCH,IADD,CACM,UAACI,YAAD,EAAkB;AACpB,cAAIA,YAAJ,EAAiB;AACbV,YAAAA,QAAQ,CAACL,WAAW,CAACH,QAAD,EAAUC,QAAV,CAAZ,CAAR;AACH,WAFD,MAGK;AACDO,YAAAA,QAAQ,CAACJ,YAAY,EAAb,CAAR;AACH;AACJ,SARD;AASH,OAVD,MAUO;AACHI,QAAAA,QAAQ,CAACJ,YAAY,EAAb,CAAR;AACH;AACJ,KAfF,EAgBK,UAAAe,KAAK,EAAI;AACLb,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCY,KAAlC;AACAX,MAAAA,QAAQ,CAACJ,YAAY,EAAb,CAAR;AACH,KAnBN,CAAP;AAqBH,GAhCD;AAiCH","sourcesContent":["//import fetch from 'cross-fetch'\nimport {apiUrl} from '../../requests/utils'\n\nconst LOGIN_REQUEST = 'LOGIN_REQUEST';\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nconst LOGIN_FAILURE = 'LOGIN_FAILURE';\n\n\nexport function loginRequest(username,password){\n    return {\n        type: LOGIN_REQUEST,\n        username: username,\n        password: password\n    }\n}\n\nexport function loginSucess(username, password){\n    return {\n        type: LOGIN_SUCCESS,\n        username:username,\n        password:password\n    }\n}\n\nexport function loginFailure(){\n    return {\n        type: LOGIN_FAILURE \n    }\n}\n\nexport function login(username,password){\n    console.log(\"Login\");\n\n    return function (dispatch){\n\n        dispatch(loginRequest(username,password));\n\n        const loginHeader = {\n            method: 'POST',\n            headers: {\n              'Authorization': 'Basic '+ btoa(username+':'+password),\n            }\n        }\n\n        return fetch(apiUrl + '/loginApp',loginHeader)\n                .then((response) => {\n                    if (response.ok){\n                        response.json()\n                        .then((responseJson) => {\n                            if (responseJson){\n                                dispatch(loginSucess(username,password))\n                            }\n                            else {\n                                dispatch(loginFailure())\n                            }\n                        });\n                    } else {\n                        dispatch(loginFailure())\n                    }        \n                },\n                    error => {\n                        console.log('An error occurred.', error);\n                        dispatch(loginFailure())\n                    }\n                )\n    }\n}"]},"metadata":{},"sourceType":"module"}