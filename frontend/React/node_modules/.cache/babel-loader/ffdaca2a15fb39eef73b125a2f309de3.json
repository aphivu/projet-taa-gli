{"ast":null,"code":"import { apiUrl } from '../../requests/utils';\nvar ACTIVITIES_REQUEST = 'ACTIVITIES_REQUEST';\nvar ACTIVITIES_SUCCESS = 'ACTIVITIES_SUCCESS';\nvar ACTIVITIES_FAILURE = 'ACTIVITIES_FAILURE';\nvar POST_ACTIVITY_REQUEST = 'POST_ACTIVITY_REQUEST';\nvar POST_ACTIVITY_SUCCESS = 'POST_ACTIVITY_SUCCESS';\nvar POST_ACTIVITY_FAILURE = 'POST_ACTIVITY_FAILURE';\nvar DELETE_ACTIVITY_REQUEST = 'DELETE_ACTIVITY_REQUEST';\nvar DELETE_ACTIVITY_SUCCESS = 'DELETE_ACTIVITY_REQUEST';\nvar DELETE_ACTIVITY_FAILURE = 'DELETE_ACTIVITY_FAILURE';\n\nfunction activitiesRequest() {\n  return {\n    type: ACTIVITIES_REQUEST\n  };\n}\n\nfunction activitiesSuccess(activities) {\n  return {\n    type: ACTIVITIES_SUCCESS,\n    activities: activities\n  };\n}\n\nfunction activitiesFailure() {\n  return {\n    type: ACTIVITIES_FAILURE\n  };\n}\n\nexport function getActivities(username, password) {\n  console.log(\"Get Activities\");\n  return function (dispatch) {\n    dispatch(activitiesRequest());\n    var loginHeader = {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Basic ' + btoa(username + ':' + password)\n      }\n    };\n    return fetch(apiUrl + '/user/activities', loginHeader).then(function (response) {\n      console.log(response.status);\n\n      if (response.ok) {\n        console.log('Response ok');\n        response.json().then(function (responseJson) {\n          dispatch(activitiesSuccess(responseJson));\n        });\n      } else {\n        dispatch(activitiesFailure());\n      }\n    }, function (error) {\n      console.log('An error occurred.', error);\n      dispatch(activitiesFailure());\n    });\n  };\n}\n\nfunction postActivityRequest() {\n  return {\n    type: POST_ACTIVITY_REQUEST\n  };\n}\n\nfunction postActivitySuccess() {\n  return {\n    type: POST_ACTIVITY_SUCCESS\n  };\n}\n\nfunction postActivityFailure() {\n  return {\n    type: POST_ACTIVITY_FAILURE\n  };\n}\n\nexport function postActivity(username, password, sport, localisation) {\n  console.log(\"Post\");\n  return function (dispatch) {\n    dispatch(postActivityRequest());\n    var loginHeader = {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Basic ' + btoa(username + ':' + password),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        sport: sport,\n        localisation: localisation\n      })\n    };\n    console.log(loginHeader.body);\n    return fetch(apiUrl + '/user/activities/add', loginHeader).then(function (response) {\n      console.log(response.status);\n\n      if (response.ok) {\n        dispatch(postActivitySuccess());\n        dispatch(getActivities(username, password));\n      } else {\n        dispatch(postActivityFailure());\n      }\n    }, function (error) {\n      console.log('An error occurred.', error);\n      dispatch(postActivityFailure());\n    });\n  };\n}\n\nfunction deleteActivityRequest() {\n  return {\n    type: DELETE_ACTIVITY_REQUEST\n  };\n}\n\nfunction deletetActivitySuccess() {\n  return {\n    type: DELETE_ACTIVITY_SUCCESS\n  };\n}\n\nfunction deleteActivityFailure() {\n  return {\n    type: DELETE_ACTIVITY_FAILURE\n  };\n}\n\nexport function deleteActivity(username, password, activity) {\n  console.log(\"Delete activity\");\n  return function (dispatch) {\n    dispatch(deleteActivityRequest());\n    var loginHeader = {\n      method: 'DELETE',\n      headers: {\n        'Authorization': 'Basic ' + btoa(username + ':' + password),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        sport: sport,\n        localisation: localisation\n      })\n    };\n    console.log(loginHeader.body);\n    return fetch(apiUrl + '/user/activities/add', loginHeader).then(function (response) {\n      console.log(response.status);\n\n      if (response.ok) {\n        dispatch(postActivitySuccess());\n        dispatch(getActivities(username, password));\n      } else {\n        dispatch(postActivityFailure());\n      }\n    }, function (error) {\n      console.log('An error occurred.', error);\n      dispatch(postActivityFailure());\n    });\n  };\n}","map":{"version":3,"sources":["/home/phi/Documents/M2 CCN/Cours/TAA/Projet/UI/frontend_react/src/redux/actions/activitiesAction.js"],"names":["apiUrl","ACTIVITIES_REQUEST","ACTIVITIES_SUCCESS","ACTIVITIES_FAILURE","POST_ACTIVITY_REQUEST","POST_ACTIVITY_SUCCESS","POST_ACTIVITY_FAILURE","DELETE_ACTIVITY_REQUEST","DELETE_ACTIVITY_SUCCESS","DELETE_ACTIVITY_FAILURE","activitiesRequest","type","activitiesSuccess","activities","activitiesFailure","getActivities","username","password","console","log","dispatch","loginHeader","method","headers","btoa","fetch","then","response","status","ok","json","responseJson","error","postActivityRequest","postActivitySuccess","postActivityFailure","postActivity","sport","localisation","body","JSON","stringify","deleteActivityRequest","deletetActivitySuccess","deleteActivityFailure","deleteActivity","activity"],"mappings":"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","sourcesContent":["import {apiUrl} from '../../requests/utils'\n\nconst ACTIVITIES_REQUEST = 'ACTIVITIES_REQUEST';\nconst ACTIVITIES_SUCCESS = 'ACTIVITIES_SUCCESS';\nconst ACTIVITIES_FAILURE = 'ACTIVITIES_FAILURE';\n\nconst POST_ACTIVITY_REQUEST = 'POST_ACTIVITY_REQUEST';\nconst POST_ACTIVITY_SUCCESS = 'POST_ACTIVITY_SUCCESS';\nconst POST_ACTIVITY_FAILURE = 'POST_ACTIVITY_FAILURE';\n\nconst DELETE_ACTIVITY_REQUEST = 'DELETE_ACTIVITY_REQUEST';\nconst DELETE_ACTIVITY_SUCCESS = 'DELETE_ACTIVITY_REQUEST';\nconst DELETE_ACTIVITY_FAILURE = 'DELETE_ACTIVITY_FAILURE';\n\n\nfunction activitiesRequest(){\n    return {\n        type: ACTIVITIES_REQUEST\n    }\n}\n\nfunction activitiesSuccess(activities){\n    return {\n        type: ACTIVITIES_SUCCESS,\n        activities: activities\n    }\n}\n\nfunction activitiesFailure(){\n    return {\n        type: ACTIVITIES_FAILURE\n    }\n}\n\nexport function getActivities(username,password){\n    console.log(\"Get Activities\");\n\n    return function (dispatch){\n\n        dispatch(activitiesRequest());\n\n        const loginHeader = {\n            method: 'GET',\n            headers: {\n                'Authorization': 'Basic '+ btoa( username + ':' + password)\n              }\n        }\n\n        return fetch(apiUrl + '/user/activities',loginHeader)\n                .then((response) => {\n                    console.log(response.status)\n                    if (response.ok){\n                        console.log('Response ok');\n                        response.json()\n                        .then((responseJson) => {\n                            dispatch(activitiesSuccess(responseJson))\n                        });\n                    } else {\n                        dispatch(activitiesFailure())\n                    }        \n                },\n                    error => {\n                        console.log('An error occurred.', error);\n                        dispatch(activitiesFailure())\n                    }\n                )\n    }\n}\n\nfunction postActivityRequest(){\n    return {\n        type: POST_ACTIVITY_REQUEST\n    }\n}\n\nfunction postActivitySuccess(){\n    return {\n        type: POST_ACTIVITY_SUCCESS,\n    }\n}\n\nfunction postActivityFailure(){\n    return {\n        type: POST_ACTIVITY_FAILURE\n    }\n}\n\nexport function postActivity(username,password,sport,localisation){\n    console.log(\"Post\");\n\n    return function (dispatch){\n\n        dispatch(postActivityRequest());\n\n        const loginHeader = {\n            method: 'POST',\n            headers: {\n                'Authorization': 'Basic '+ btoa( username + ':' + password),\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify({\n                sport: sport,\n                localisation: localisation,\n            })\n        }\n\n        console.log(loginHeader.body)\n\n        return fetch(apiUrl + '/user/activities/add',loginHeader)\n                .then((response) => {\n                    console.log(response.status)\n                    if (response.ok){\n                        dispatch(postActivitySuccess())\n                        dispatch(getActivities(username,password))\n                    } else {\n                        dispatch(postActivityFailure())\n                    }        \n                },\n                    error => {\n                        console.log('An error occurred.', error);\n                        dispatch(postActivityFailure())\n                    }\n                )\n    }\n}\n\n\nfunction deleteActivityRequest(){\n    return {\n        type: DELETE_ACTIVITY_REQUEST\n    }\n}\n\nfunction deletetActivitySuccess(){\n    return {\n        type: DELETE_ACTIVITY_SUCCESS,\n    }\n}\n\nfunction deleteActivityFailure(){\n    return {\n        type: DELETE_ACTIVITY_FAILURE\n    }\n}\n\nexport function deleteActivity(username,password,activity){\n    console.log(\"Delete activity\");\n\n    return function (dispatch){\n\n        dispatch(deleteActivityRequest());\n\n        const loginHeader = {\n            method: 'DELETE',\n            headers: {\n                'Authorization': 'Basic '+ btoa( username + ':' + password),\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify({\n                sport: sport,\n                localisation: localisation,\n            })\n        }\n\n        console.log(loginHeader.body)\n\n        return fetch(apiUrl + '/user/activities/add',loginHeader)\n                .then((response) => {\n                    console.log(response.status)\n                    if (response.ok){\n                        dispatch(postActivitySuccess())\n                        dispatch(getActivities(username,password))\n                    } else {\n                        dispatch(postActivityFailure())\n                    }        \n                },\n                    error => {\n                        console.log('An error occurred.', error);\n                        dispatch(postActivityFailure())\n                    }\n                )\n    }\n}"]},"metadata":{},"sourceType":"module"}